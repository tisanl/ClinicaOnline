<main class="card-container anim-entrar-izquierda">
    <h2 class="titulo">Informes</h2>

    <mat-tab-group class="tabs" (selectedTabChange)="onTabChange($event)">

        <!-- Logs -->
        <mat-tab label="Logs">
            <button mat-button (click)="descargarPdfLogs()">
                Descargar PDF
            </button>

            <table matSort (matSortChange)="sortData($event)" class="tabla-logs">
                <thead>
                    <tr>
                        <th mat-sort-header="usuario">Usuario</th>
                        <th mat-sort-header="mail">Mail</th>
                        <th mat-sort-header="perfil">Perfil</th>
                        <th mat-sort-header="created_at">Ingreso</th>
                    </tr>
                </thead>

                <tbody>
                    @for (log of logsSortedData; track log.id) {
                    <tr>
                        <td>{{ log.usuario | nombreCompleto }}</td>
                        <td>{{ log.usuario.email }}</td>
                        <td>{{ log.usuario.perfil | capitalizeAll }}</td>
                        <td>{{ log.created_at | date:'dd/MM/yyyy HH:mm:ss' }}</td>
                    </tr>
                    }
                </tbody>
            </table>
        </mat-tab>

        <!-- Cantidad turnos por especialidad -->
        <mat-tab label="Turnos por Especialidad">
            <div class="tab-centro">
                <button mat-button (click)="descargarGraficoTurnosPorEspecialidad()">
                    Descargar PDF
                </button>
                <canvas #graficoTurnosPorEspecialidades></canvas>
            </div>
        </mat-tab>

        <!-- Cantidad turnos por dia -->
        <mat-tab label="Turnos por Dia">
            <div class="tab-centro">
                <button mat-button (click)="descargarGraficoTurnosPorDia()">
                    Descargar PDF
                </button>
                <canvas #graficoTurnosPorDia></canvas>
            </div>
        </mat-tab>

        <!-- Cantidad turnos solicitados por especialista en lapso tiempo -->
        <mat-tab label="Turnos solicitados por especialista">
            <div class="tab-centro">
                <button mat-button (click)="descargarGraficoTurnosSolicitadosEspecialistasLapsoTiempo()">
                    Descargar PDF
                </button>
                <canvas #graficoTurnosSolicitadosEspecialistaLapsoTiempo></canvas>
                <div class="filtros-fecha">
                    <!-- Fecha DESDE -->
                    <mat-form-field appearance="outline">
                        <mat-label>Desde</mat-label>
                        <input matInput [matDatepicker]="pickerDesdeSolicitados" [(ngModel)]="fechaDesde"
                            (ngModelChange)="actualizarObtenerTurnosSolicitadosEspecialistasLapsoTiempo()">
                        <mat-datepicker-toggle matSuffix [for]="pickerDesdeSolicitados"></mat-datepicker-toggle>
                        <mat-datepicker #pickerDesdeSolicitados></mat-datepicker>
                    </mat-form-field>

                    <!-- Fecha HASTA -->
                    <mat-form-field appearance="outline">
                        <mat-label>Hasta</mat-label>
                        <input matInput [matDatepicker]="pickerHastaSolicitados" [(ngModel)]="fechaHasta"
                            (ngModelChange)="actualizarObtenerTurnosSolicitadosEspecialistasLapsoTiempo()">
                        <mat-datepicker-toggle matSuffix [for]="pickerHastaSolicitados"></mat-datepicker-toggle>
                        <mat-datepicker #pickerHastaSolicitados></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        </mat-tab>

        <!-- Cantidad turnos finalizados por especialista en lapso tiempo -->
        <mat-tab label="Turnos finalizados por especialista">
            <div class="tab-centro">
                <button mat-button (click)="descargarGraficoTurnosFinalizadosEspecialistasLapsoTiempo()">
                    Descargar PDF
                </button>
                <canvas #graficoTurnosFinalizadosEspecialistaLapsoTiempo></canvas>
                <div class="filtros-fecha">
                    <!-- Fecha DESDE -->
                    <mat-form-field appearance="outline">
                        <mat-label>Desde</mat-label>
                        <input matInput [matDatepicker]="pickerDesdeFinalizados" [(ngModel)]="fechaDesde"
                            (ngModelChange)="actualizarObtenerTurnosFinalizadosEspecialistasLapsoTiempo()">
                        <mat-datepicker-toggle matSuffix [for]="pickerDesdeFinalizados"></mat-datepicker-toggle>
                        <mat-datepicker #pickerDesdeFinalizados></mat-datepicker>
                    </mat-form-field>

                    <!-- Fecha HASTA -->
                    <mat-form-field appearance="outline">
                        <mat-label>Hasta</mat-label>
                        <input matInput [matDatepicker]="pickerHastaFinalizados" [(ngModel)]="fechaHasta"
                            (ngModelChange)="actualizarObtenerTurnosFinalizadosEspecialistasLapsoTiempo()">
                        <mat-datepicker-toggle matSuffix [for]="pickerHastaFinalizados"></mat-datepicker-toggle>
                        <mat-datepicker #pickerHastaFinalizados></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
        </mat-tab>


    </mat-tab-group>
</main>