import{a as R}from"./chunk-K2IRKHVJ.js";import{c as S,e as l,g as y,h as C,i as E,k as d,m as k,n as M,q as F,s as I,t as L}from"./chunk-X7ATPYRG.js";import{a as x,b as N,c as P}from"./chunk-TJBGGJLY.js";import{V as T,W as A}from"./chunk-VBHGM43M.js";import{b}from"./chunk-ZH5JQVKE.js";import"./chunk-XYYWM5UU.js";import{s as w,t as _}from"./chunk-NR3I2YFB.js";import"./chunk-LJ5XHLMQ.js";import{Bb as v,Cb as t,Db as o,Eb as u,Pb as a,Sa as m,ab as c,ac as p,dc as i,gb as f}from"./chunk-KP5MESBS.js";import{h}from"./chunk-FK42CRUA.js";var D=class g{constructor(r,s,e,n){this.router=r;this.u=s;this.sa=e;this.iconRegistry=n;n.setDefaultFontSetClass("material-symbols-outlined")}form;ngOnInit(){this.form=new E({email:new d("",[l.required,l.email]),password:new d("",[l.required,l.minLength(6)]),captcha:new d("",l.required)})}login(){return h(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),yield this.sa.showAlertError("Error en los datos","Revise los datos ingresados");return}this.sa.showLoading();try{yield this.u.login(this.email?.value,this.password?.value),this.sa.closeLoading(),yield this.sa.showAlertSuccess("Ingreso completado!","Bienvenido "+this.u.userData.nombre),this.goTo("home")}catch(r){this.sa.closeLoading(),yield this.sa.showAlertError("Error al ingresar",r.message)}})}autocompletar(r){switch(r){case"administrador":this.form.patchValue({email:"nahorij455@fandoe.com",password:"123456"});break;case"especialista":this.form.patchValue({email:"kenir92926@limtu.com",password:"123456"});break;case"paciente":this.form.patchValue({email:"govol30777@fandoe.com",password:"123456"});break}}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get captcha(){return this.form.get("captcha")}goTo(r){console.log("Volver al login"),this.router.navigate([r])}static \u0275fac=function(s){return new(s||g)(c(b),c(_),c(w),c(x))};static \u0275cmp=f({type:g,selectors:[["app-login"]],decls:41,vars:7,consts:[[1,"card-container"],[1,"titulo"],[1,"form-container",3,"formGroup"],[1,"input"],["type","email","placeholder","Tu correo","formControlName","email"],["type","password","placeholder","Contrase\xF1a","formControlName","password"],["appCaptcha","","formControlName","captcha"],["type","button",1,"btn-1",3,"click"],[1,"registro-texto"],["type","button",1,"btn-registro",3,"click"],[1,"fab-container"],["matFab","","extended","",3,"click"]],template:function(s,e){s&1&&(t(0,"main",0)(1,"h2",1),i(2,"Inicio de Sesion"),o(),t(3,"form",2)(4,"div",3)(5,"label"),i(6,"Correo Electr\xF3nico"),o(),u(7,"input",4),t(8,"small"),i(9," Ingresar un mail v\xE1lido. "),o()(),t(10,"div",3)(11,"label"),i(12,"Contrase\xF1a"),o(),u(13,"input",5),t(14,"small"),i(15," La contrase\xF1a debe contener un m\xEDnimo de 6 caracteres. "),o()(),t(16,"div",3)(17,"label"),i(18,"Captcha"),o(),u(19,"div",6),t(20,"small"),i(21," Completar el captcha. "),o()()(),t(22,"button",7),a("click",function(){return e.login()}),i(23,"Ingresar"),o(),t(24,"p",8),i(25," \xBFNo ten\xE9s cuenta? "),t(26,"button",9),a("click",function(){return e.goTo("registro")}),i(27,"Registrate"),o()()(),t(28,"div",10)(29,"button",11),a("click",function(){return e.autocompletar("administrador")}),t(30,"mat-icon"),i(31,"crown"),o(),i(32," Administrador "),o(),t(33,"button",11),a("click",function(){return e.autocompletar("especialista")}),t(34,"mat-icon"),i(35,"stethoscope"),o(),i(36," Especialista "),o(),t(37,"button",11),a("click",function(){return e.autocompletar("paciente")}),t(38,"mat-icon"),i(39,"personal_injury"),o(),i(40," Paciente "),o()()),s&2&&(m(3),v("formGroup",e.form),m(5),p("visibility",e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"visible":"hidden"),m(6),p("visibility",e.password!=null&&e.password.invalid&&(e.password!=null&&e.password.touched)?"visible":"hidden"),m(6),p("visibility",e.captcha!=null&&e.captcha.invalid&&(e.captcha!=null&&e.captcha.touched)?"visible":"hidden"))},dependencies:[I,k,S,y,C,L,M,F,P,N,A,T,R],styles:[".registro-texto[_ngcontent-%COMP%]{text-align:center;color:var(--c-primary-light)}.registro-texto[_ngcontent-%COMP%]   .btn-registro[_ngcontent-%COMP%]{margin-left:.3rem}.btn-registro[_ngcontent-%COMP%]{background:none;color:var(--c-accent);border:none;font-size:.9rem;font-weight:400;cursor:pointer;padding:0;transition:color .2s ease-in-out}.btn-registro[_ngcontent-%COMP%]:hover{color:#e0a800;text-decoration:underline}.fab-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;display:flex;flex-direction:column;gap:10px}"]})};export{D as Login};
