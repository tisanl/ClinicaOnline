import{c as y,e as n,h as E,i as A,j as S,l as d,m as _,n as C,q as F,s as N,t as D}from"./chunk-Z6A5G2QF.js";import{b as f}from"./chunk-2UEFWIHA.js";import"./chunk-CP6NELDM.js";import{s as b,t as w}from"./chunk-UGTTAIU5.js";import"./chunk-LJ5XHLMQ.js";import{Bb as v,Cb as i,Db as t,Eb as m,Pb as p,Sa as r,ab as u,ac as s,dc as l,gb as c}from"./chunk-KP5MESBS.js";import{h}from"./chunk-FK42CRUA.js";var R=class g{constructor(a,o,e){this.router=a;this.u=o;this.sa=e}form;mailAmin=null;ngOnInit(){this.form=new S({email:new d(null,[n.required,n.email]),password:new d(null,[n.required,n.minLength(6)]),nombre:new d(null,[n.required,n.pattern("^[a-zA-Z ]+$")]),apellido:new d(null,[n.required,n.pattern("^[a-zA-Z ]+$")]),dni:new d(null,[n.required,n.pattern("^[0-9]{8,9}$")]),edad:new d(null,[n.required,n.pattern("^[0-9]{1,2}$"),n.min(18),n.max(120)]),imagen1:new d(null,n.required),passwordAdmin:new d(null,[n.required,n.minLength(6)])}),this.mailAmin=this.u.userEmail}registrarUsuario(){return h(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),yield this.sa.showAlertError("Error en los datos","Revise los datos ingresados");return}this.sa.showLoading();let a={id:"",created_at:null,email:this.email.value,nombre:this.capitalizar(this.nombre?.value),apellido:this.capitalizar(this.apellido?.value),dni:this.dni.value,edad:this.edad.value,obra_social:null,imagen_1_path:null,imagen_2_path:null,imagen_1_file:this.imagen1.value,imagen_2_file:null,perfil:"admin",estado:null,historia_clinica_id:null,lista_especialidades_id:null,usuario_especialidad:null,horarios_especialista:null};try{yield this.u.login(this.mailAmin,this.passwordAdmin.value),yield this.u.registrar(this.email?.value,this.password?.value,a),this.u.logout(),this.u.login(this.mailAmin,this.passwordAdmin.value),this.form.reset(),this.sa.closeLoading(),yield this.sa.showAlertSuccess("Registro completado!","El usuario fue creado exitosamente. Debe validar su mail")}catch(o){this.sa.closeLoading(),yield this.sa.showAlertError("Error en el registro",o.message)}})}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get dni(){return this.form.get("dni")}get edad(){return this.form.get("edad")}get imagen1(){return this.form.get("imagen1")}get passwordAdmin(){return this.form.get("passwordAdmin")}onFileSelected(a,o){let e=a.target.files[0];o==="imagen1"&&this.imagen1.setValue(e)}capitalizar(a){return a[0].toUpperCase()+a.slice(1).toLowerCase()}goTo(a){this.router.navigate([a])}static \u0275fac=function(o){return new(o||g)(u(f),u(w),u(b))};static \u0275cmp=c({type:g,selectors:[["app-registro-admin"]],decls:54,vars:17,consts:[[1,"card-container"],[1,"titulo"],[1,"form-container",3,"formGroup"],[1,"input"],["type","text","placeholder","Nombre","formControlName","nombre"],["type","text","placeholder","Apellido","formControlName","apellido"],["type","text","placeholder","Dni","formControlName","dni"],["type","text","placeholder","Edad","formControlName","edad"],["type","email","placeholder","Correo","formControlName","email"],["type","password","placeholder","Contrase\xF1a","formControlName","password"],["type","file","accept","image/*",3,"change"],["type","password","placeholder","Contrase\xF1a","formControlName","passwordAdmin"],["type","button",1,"btn-1",3,"click"]],template:function(o,e){o&1&&(i(0,"main",0)(1,"h2",1),l(2,"Registro de Usuario Administrador"),t(),i(3,"form",2)(4,"div",3)(5,"label"),l(6,"Nombre"),t(),m(7,"input",4),i(8,"small"),l(9," El nombre es obligatorio, solo puede contener letras y espacios. "),t()(),i(10,"div",3)(11,"label"),l(12,"Apellido"),t(),m(13,"input",5),i(14,"small"),l(15," El apellido es obligatorio, solo puede contener letras y espacios. "),t()(),i(16,"div",3)(17,"label"),l(18,"Dni"),t(),m(19,"input",6),i(20,"small"),l(21," El dni es obligatorio, debe contener 8 o 9 d\xEDgitos. "),t()(),i(22,"div",3)(23,"label"),l(24,"Edad"),t(),m(25,"input",7),i(26,"small"),l(27," La edad es obligatoria, debe ser mayor a 18 o menor a 120. "),t()(),i(28,"div",3)(29,"label"),l(30,"Correo Electr\xF3nico"),t(),m(31,"input",8),i(32,"small"),l(33," Ingresar un mail v\xE1lido. "),t()(),i(34,"div",3)(35,"label"),l(36,"Contrase\xF1a"),t(),m(37,"input",9),i(38,"small"),l(39," La contrase\xF1a debe contener un m\xEDnimo de 6 caracteres. "),t()(),i(40,"div",3)(41,"label"),l(42,"Imagen de perfil"),t(),i(43,"input",10),p("change",function(U){return e.onFileSelected(U,"imagen1"),e.imagen1==null?null:e.imagen1.markAsTouched()}),t(),i(44,"small"),l(45," La imagen es obligatoria. "),t()(),i(46,"div",3)(47,"label"),l(48,"Contrase\xF1a Propia"),t(),m(49,"input",11),i(50,"small"),l(51," Es obligatoria para registrar al usuario. Debe contener un m\xEDnimo de 6 caracteres. "),t()()(),i(52,"button",12),p("click",function(){return e.registrarUsuario()}),l(53,"Registrar"),t()()),o&2&&(r(3),v("formGroup",e.form),r(5),s("visibility",e.nombre!=null&&e.nombre.invalid&&(e.nombre!=null&&e.nombre.touched)?"visible":"hidden"),r(6),s("visibility",e.apellido!=null&&e.apellido.invalid&&(e.apellido!=null&&e.apellido.touched)?"visible":"hidden"),r(6),s("visibility",e.dni!=null&&e.dni.invalid&&(e.dni!=null&&e.dni.touched)?"visible":"hidden"),r(6),s("visibility",e.edad!=null&&e.edad.invalid&&(e.edad!=null&&e.edad.touched)?"visible":"hidden"),r(6),s("visibility",e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?"visible":"hidden"),r(6),s("visibility",e.password!=null&&e.password.invalid&&(e.password!=null&&e.password.touched)?"visible":"hidden"),r(6),s("visibility",e.imagen1!=null&&e.imagen1.invalid&&(e.imagen1!=null&&e.imagen1.touched)?"visible":"hidden"),r(6),s("visibility",e.passwordAdmin!=null&&e.passwordAdmin.invalid&&(e.passwordAdmin!=null&&e.passwordAdmin.touched)?"visible":"hidden"))},dependencies:[N,_,y,E,A,D,C,F],encapsulation:2})};export{R as RegistroAdmin};
